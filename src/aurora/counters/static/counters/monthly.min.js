!function(t){var e=t("#counters").data("url"),r=t("#counters").data("token");t("#counters").data("registration");const l=(a,t)=>a+t;var o=moment().format("YYYY-MM-DD"),a=document.getElementById("myChart"),n={datalabels:{labels:{title:null}},type:"line",borderColor:"#FF312D",fill:!1,borderWidth:1,order:1},d={type:"bar",options:{parsing:{key:"total",xAxisKey:"total",yAxisKey:"total"},responsive:!1,layout:{padding:0},plugins:{datalabels:{anchor:"center",align:"center",formatter:Math.round},title:{display:!0},legend:{display:!0}}},data:{labels:[],datasets:[{label:"",data:[],backgroundColor:"#2861c555",borderColor:"#2861c5",borderWidth:1}]}};Chart.register(ChartDataLabels);var s=new Chart(a,d);function i(a){a.rnd=r||Math.random();a=new URLSearchParams(a).toString();t.getJSON(e+"?"+a).done(function(a){var t,e,r=a.data.map(a=>a.total);s.data.datasets=[s.data.datasets[0]],0<r.length&&(0<(e=(t=((a,e)=>{var t=Math.ceil(a.length/e);const r=[];for(var o=0;o<t;o++)r[o]=[];a.forEach((a,t)=>{t=Math.floor(t/e);r[t],r[t].push(a)});const n=r.map(a=>{var t=a.reduce(l)/e;return a.map(a=>t)});return n.flat().map(a=>Math.floor(a))})(r,r.length))[0])&&(s.data.datasets[1]=Object.assign({},n),s.data.datasets[1].data=t,s.data.datasets[1].label="Daily Average: "+e)),s.data.labels=a.labels,s.data.datasets[0].data=r,s.data.datasets[0].rawData=a.data,s.data.datasets[0].label="Total Registrations: "+a.total.toLocaleString(),s.options.plugins.title.text=a.label,s.update(),o=moment(a.day,"YYYY-MM-DD").format("YYYY-MM-DD")})}i({}),t("#prev").on("click",function(a){i({m:o=moment(o).subtract(1,"months").format("YYYY-MM-DD")})}),t("#next").on("click",function(a){i({m:o=moment(o).add(1,"months").format("YYYY-MM-DD")})})}($);
